(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7978:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return C}});var i=e(5893),r=e(9008),o=e(8216),s=e(5997),a=e(4695),c=e(2421),u=e(1985),h=e(2953),l=e(2809),d=e(7294),f=e(9842),y=e(5499),x=function(){function t(n,e){(0,o.Z)(this,t),this.width=n,this.height=e,this.coordinatesExist=this.coordinatesExist.bind(this)}return(0,s.Z)(t,[{key:"coordinates",value:function(t){var n=Math.floor(t/this.width),e={x:t%this.width+1,y:n+1};return this.coordinatesExist(e)?e:null}},{key:"index",value:function(t){return this.coordinatesExist(t)?(t.y-1)*this.width+(t.x-1):null}},{key:"neighbours",value:function(t){return[{x:t.x-1,y:t.y-1},{x:t.x,y:t.y-1},{x:t.x+1,y:t.y-1},{x:t.x-1,y:t.y},{x:t.x+1,y:t.y},{x:t.x-1,y:t.y+1},{x:t.x,y:t.y+1},{x:t.x+1,y:t.y+1}].filter(this.coordinatesExist)}},{key:"coordinatesExist",value:function(t){return!(t.x<1)&&(!(t.y<1)&&(!(t.x>this.width)&&!(t.y>this.height)))}}]),t}(),v=function t(n,e,i){(0,o.Z)(this,t),this.state=i,(0,l.Z)(this,"coordinates",void 0),this.coordinates={x:n,y:e}};function g(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,i=(0,h.Z)(t);if(n){var r=(0,h.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)}}var p=function(t,n,e){var i=e.neighbours(t.coordinates),r=i.map((function(t){return n.find((function(n){return n.coordinates.x===t.x&&n.coordinates.y===t.y}))}));if(r.includes(void 0))throw console.log({neighbourCoords:i,neighbours:r}),new Error("A neighbour cannot be found.");return r.filter((function(t){return!0===t.state}))},w=function(t){(0,c.Z)(e,t);var n=g(e);function e(){return(0,o.Z)(this,e),n.apply(this,arguments)}return(0,s.Z)(e,[{key:"apply",value:function(t,n){var e=p(t,n,this.grid);return!0===t.state&&[2,3].includes(e.length)||!1===t.state&&3===e.length?new v(t.coordinates.x,t.coordinates.y,!0):new v(t.coordinates.x,t.coordinates.y,!1)}}]),e}((function t(n,e){(0,o.Z)(this,t),this.width=n,this.height=e,(0,l.Z)(this,"grid",void 0),this.grid=new x(n,e)})),Z=function(t,n){var e=new x(t,n);return new Array(t*n).fill(null).map((function(t,n){var i=e.coordinates(n),r=Math.random()<.1;return new v(i.x,i.y,r)}))},m=e(7256),b=function(){function t(n,e,i){(0,o.Z)(this,t),this.width=n,this.height=e,this.rules=i,(0,l.Z)(this,"cells",[]),(0,l.Z)(this,"grid",void 0),this.grid=new x(n,e)}return(0,s.Z)(t,[{key:"next",value:function(t){var n=this;this.validateGridCells(t);var e=t.map((function(e){return n.rules.reduce((function(n,e,i,r){(0,m.Z)(r);return e.apply(n,t)}),e)}));return this.validateGridCells(e),e}},{key:"validateGridCells",value:function(t){var n=this,e=this.width*this.height;if(t.length!==e)throw new Error("".concat(e-t.length," cells missing"));new Array(this.width*this.height).fill(null).forEach((function(e,i){var r=n.grid.coordinates(i);if(!t.find((function(t){return t.coordinates.x===r.x&&t.coordinates.y===r.y})))throw new Error("No cell in initialConditions matches the coordinates ".concat(JSON.stringify(r)))}))}}]),t}();function j(t){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,i=(0,h.Z)(t);if(n){var r=(0,h.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,u.Z)(this,e)}}var k=function(t){(0,c.Z)(r,t);var n=j(r);function r(t){var i;(0,o.Z)(this,r),i=n.call(this,t),(0,l.Z)((0,a.Z)(i),"game",void 0),(0,l.Z)((0,a.Z)(i),"interval",void 0),i.renderCell=i.renderCell.bind((0,a.Z)(i));return i.game=new b(50,50,[new w(50,50)]),i.state={cells:Z(50,50)},i.interval=e.g.setInterval((function(){i.setState((function(t){return{cells:i.game.next(t.cells)}}))}),r.refreshSpeed),i}return(0,s.Z)(r,[{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var t=this.state.cells,n=800;Math.sqrt(64e4/t.length);return(0,i.jsxs)(f.Xz,{dpr:[1,2],shadows:!0,style:{width:n,height:n},children:[(0,i.jsx)("camera",{position:[-50,-30,-70],children:(0,i.jsx)("mesh",{rotation:[-.5,0,0],children:t.map(this.renderCell)})}),(0,i.jsx)("ambientLight",{intensity:1}),(0,i.jsx)("directionalLight",{color:"purple",position:[0,0,5]}),(0,i.jsx)("color",{attach:"background",args:["#381a40"]}),(0,i.jsx)("fog",{attach:"fog",args:["#270430",50,180]}),(0,i.jsx)(y.z,{enablePan:!0,enableZoom:!0})]})}},{key:"renderCell",value:function(t,n){this.game.width,this.game.height;var e=100/this.game.width,r=100/this.game.height,o=t.coordinates.x*e-e,s=t.coordinates.y*r-r;return(0,i.jsxs)("mesh",{position:[o,s,0],scale:1,children:[(0,i.jsx)("boxGeometry",{args:[e,e,5*e]}),(0,i.jsx)("meshStandardMaterial",{color:t.state?"#42c71a":"#b50b5d"})]},n)}}]),r}(d.Component);(0,l.Z)(k,"refreshSpeed",500);var E=k;function C(t){t.allPostsData;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.default,{children:(0,i.jsx)("title",{children:"Game of Life"})}),(0,i.jsx)("section",{children:(0,i.jsx)(E,{})})]})}},5301:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(7978)}])}},function(t){t.O(0,[737,486,774,888,179],(function(){return n=5301,t(t.s=n);var n}));var n=t.O();_N_E=n}]);