(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7978:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return _}});var i=n(5893),r=n(9008),o=n(8216),s=n(5997),c=n(4695),a=n(2421),u=n(1985),l=n(2953),h=n(2809),f=n(7294),d=n(9842),y=n(5499),x=n(3277),v=n(2248),g=function(){function t(e,n){(0,o.Z)(this,t),this.width=e,this.height=n,this.coordinatesExist=this.coordinatesExist.bind(this)}return(0,s.Z)(t,[{key:"coordinates",value:function(t){var e=Math.floor(t/this.width),n={x:t%this.width+1,y:e+1};return this.coordinatesExist(n)?n:null}},{key:"index",value:function(t){return this.coordinatesExist(t)?(t.y-1)*this.width+(t.x-1):null}},{key:"neighbours",value:function(t){return[{x:t.x-1,y:t.y-1},{x:t.x,y:t.y-1},{x:t.x+1,y:t.y-1},{x:t.x-1,y:t.y},{x:t.x+1,y:t.y},{x:t.x-1,y:t.y+1},{x:t.x,y:t.y+1},{x:t.x+1,y:t.y+1}].filter(this.coordinatesExist)}},{key:"coordinatesExist",value:function(t){return!(t.x<1)&&(!(t.y<1)&&(!(t.x>this.width)&&!(t.y>this.height)))}}]),t}(),p=function t(e,n){(0,o.Z)(this,t),this.width=e,this.height=n,(0,h.Z)(this,"grid",void 0),this.grid=new g(e,n)},w=function(){function t(e,n,i){(0,o.Z)(this,t),this.state=i,(0,h.Z)(this,"coordinates",void 0),this.coordinates={x:e,y:n}}return(0,s.Z)(t,[{key:"setState",value:function(t){return this.state=t,this}}]),t}();function Z(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,l.Z)(t);if(e){var r=(0,l.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.Z)(this,n)}}var m=function(t,e,n){var i=n.neighbours(t.coordinates),r=i.map((function(t){return e.find((function(e){return e.coordinates.x===t.x&&e.coordinates.y===t.y}))}));if(r.includes(void 0))throw console.log({neighbourCoords:i,neighbours:r}),new Error("A neighbour cannot be found.");return r.filter((function(t){return!0===t.state}))},b=function(t){(0,a.Z)(n,t);var e=Z(n);function n(){return(0,o.Z)(this,n),e.apply(this,arguments)}return(0,s.Z)(n,[{key:"apply",value:function(t,e){var n=m(t,e,this.grid);return!0===t.state&&[2,3].includes(n.length)||!1===t.state&&3===n.length?new w(t.coordinates.x,t.coordinates.y,!0):new w(t.coordinates.x,t.coordinates.y,!1)}}]),n}(p),j=n(7256),E=function(){function t(e,n,i){(0,o.Z)(this,t),this.width=e,this.height=n,this.rules=i,(0,h.Z)(this,"cells",[]),(0,h.Z)(this,"grid",void 0),this.grid=new g(e,n)}return(0,s.Z)(t,[{key:"next",value:function(t){var e=this;this.validateGridCells(t);var n=t.map((function(n){return e.rules.reduce((function(e,n,i,r){(0,j.Z)(r);return n.apply(e,t)}),n)}));return this.validateGridCells(n),n}},{key:"validateGridCells",value:function(t){var e=this,n=this.width*this.height;if(t.length!==n)throw new Error("".concat(n-t.length," cells missing"));new Array(this.width*this.height).fill(null).forEach((function(n,i){var r=e.grid.coordinates(i);if(!t.find((function(t){return t.coordinates.x===r.x&&t.coordinates.y===r.y})))throw new Error("No cell in initialConditions matches the coordinates ".concat(JSON.stringify(r)))}))}}]),t}();function k(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,l.Z)(t);if(e){var r=(0,l.Z)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.Z)(this,n)}}var R=function(t){(0,a.Z)(r,t);var e=k(r);function r(t){var i;(0,o.Z)(this,r),i=e.call(this,t),(0,h.Z)((0,c.Z)(i),"game",void 0),(0,h.Z)((0,c.Z)(i),"interval",void 0),(0,h.Z)((0,c.Z)(i),"cells",[]),(0,h.Z)((0,c.Z)(i),"cellRefs",[]),i.renderCell=i.renderCell.bind((0,c.Z)(i));return i.game=new E(40,40,[new b(40,40)]),i.cells=function(t,e){var n=new g(t,e);return new Array(t*e).fill(null).map((function(t,e){var i=n.coordinates(e),r=Math.random()<.1;return new w(i.x,i.y,r)}))}(40,40),i.cells.forEach((function(t,e){i.cellRefs[e]=f.createRef()})),i.interval=n.g.setInterval((function(){i.cells=i.game.next(i.cells),i.cells.forEach((function(t,e){var n;null===(n=i.cellRefs[e].current)||void 0===n||n.color.set(t.state?"#42c71a":"#b50b5d")}))}),r.refreshSpeed),i}return(0,s.Z)(r,[{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var t=this.cells;return(0,i.jsxs)(d.Xz,{dpr:[1,2],shadows:!0,style:{width:800,height:800},children:[(0,i.jsx)("camera",{position:[-50,-20,-70],children:(0,i.jsx)("mesh",{rotation:[-.7,0,0],children:t.map(this.renderCell)})}),(0,i.jsx)("ambientLight",{intensity:.6}),(0,i.jsx)("directionalLight",{color:"orange",position:[0,0,-80],intensity:20}),(0,i.jsx)("color",{attach:"background",args:["white"]}),(0,i.jsx)("fog",{attach:"fog",args:["red",50,200]}),(0,i.jsx)(y.z,{enablePan:!0,enableZoom:!0}),(0,i.jsxs)(x.xC,{children:[(0,i.jsx)(x.y8,{focusDistance:.09,focalLength:.06,bokehScale:2,height:500}),(0,i.jsx)(x.cy,{opacity:.2}),(0,i.jsx)(x.vh,{blendFunction:v.YQ.OVERLAY,density:1.25}),(0,i.jsx)(x.gM,{delay:[3,5],duration:[.1,1],strength:[.01,.5],mode:v.O7.SPORADIC,active:!0,ratio:.4})]})]})}},{key:"renderCell",value:function(t,e){var n=100/this.game.width,r=100/this.game.height,o=t.coordinates.x*n-n,s=t.coordinates.y*r-r;return(0,i.jsxs)("mesh",{position:[o,s,0],scale:1,children:[(0,i.jsx)("boxGeometry",{args:[n,n,5*n]}),(0,i.jsx)("meshStandardMaterial",{color:t.state?"#42c71a":"#b50b5d",ref:this.cellRefs[e]})]},e)}}]),r}(f.Component);(0,h.Z)(R,"refreshSpeed",100);var C=R;function _(t){t.allPostsData;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.default,{children:(0,i.jsx)("title",{children:"Game of Life"})}),(0,i.jsx)("section",{children:(0,i.jsx)(C,{})})]})}},5301:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(7978)}])}},function(t){t.O(0,[737,444,40,774,888,179],(function(){return e=5301,t(t.s=e);var e}));var e=t.O();_N_E=e}]);